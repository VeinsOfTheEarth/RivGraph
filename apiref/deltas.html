<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>deltas &mdash; RivGraph 0.5.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery-binder.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery-dataframe.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery-rendered-html.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="rivers" href="rivers.html" />
    <link rel="prev" title="rivgraph" href="rivgraph.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html">
            <img src="../_static/rg_logo_full.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.5.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart/index.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../background/index.html">Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/index.html">Installation Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maskmaking/index.html">Maskmaking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../shoreline/index.html">Shoreline creation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../linksnodes/index.html">Link and Node Dictionaries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../issues/index.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../featuredevelopment/index.html">Feature Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gallery/index.html">RivGraph in the wild</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="rivgraph.html">rivgraph</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">deltas</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#delta-directionality">delta_directionality</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rivgraph.deltas.delta_directionality.dir_synthetic_DEM"><code class="docutils literal notranslate"><span class="pre">dir_synthetic_DEM()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#rivgraph.deltas.delta_directionality.fix_delta_cycle"><code class="docutils literal notranslate"><span class="pre">fix_delta_cycle()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#rivgraph.deltas.delta_directionality.fix_delta_cycles"><code class="docutils literal notranslate"><span class="pre">fix_delta_cycles()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#rivgraph.deltas.delta_directionality.hull_coords"><code class="docutils literal notranslate"><span class="pre">hull_coords()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#rivgraph.deltas.delta_directionality.set_initial_directionality"><code class="docutils literal notranslate"><span class="pre">set_initial_directionality()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#rivgraph.deltas.delta_directionality.set_link_directions"><code class="docutils literal notranslate"><span class="pre">set_link_directions()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#delta-metrics">delta_metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rivgraph.deltas.delta_metrics.add_super_apex"><code class="docutils literal notranslate"><span class="pre">add_super_apex()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#rivgraph.deltas.delta_metrics.calc_QR"><code class="docutils literal notranslate"><span class="pre">calc_QR()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#rivgraph.deltas.delta_metrics.compute_delta_metrics"><code class="docutils literal notranslate"><span class="pre">compute_delta_metrics()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#rivgraph.deltas.delta_metrics.compute_steady_state_link_fluxes"><code class="docutils literal notranslate"><span class="pre">compute_steady_state_link_fluxes()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#rivgraph.deltas.delta_metrics.delete_super_apex"><code class="docutils literal notranslate"><span class="pre">delete_super_apex()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#rivgraph.deltas.delta_metrics.delta_nER"><code class="docutils literal notranslate"><span class="pre">delta_nER()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#rivgraph.deltas.delta_metrics.delta_subN_F"><code class="docutils literal notranslate"><span class="pre">delta_subN_F()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#rivgraph.deltas.delta_metrics.dist_from_apex"><code class="docutils literal notranslate"><span class="pre">dist_from_apex()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#rivgraph.deltas.delta_metrics.dyn_entropy_based_dyn"><code class="docutils literal notranslate"><span class="pre">dyn_entropy_based_dyn()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#rivgraph.deltas.delta_metrics.dyn_flux_sharing_index"><code class="docutils literal notranslate"><span class="pre">dyn_flux_sharing_index()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#rivgraph.deltas.delta_metrics.dyn_leakage_index"><code class="docutils literal notranslate"><span class="pre">dyn_leakage_index()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#rivgraph.deltas.delta_metrics.dyn_pairwise_dep"><code class="docutils literal notranslate"><span class="pre">dyn_pairwise_dep()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#rivgraph.deltas.delta_metrics.ensure_single_inlet"><code class="docutils literal notranslate"><span class="pre">ensure_single_inlet()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#rivgraph.deltas.delta_metrics.find_inlet_outlet_nodes"><code class="docutils literal notranslate"><span class="pre">find_inlet_outlet_nodes()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#rivgraph.deltas.delta_metrics.graphiphy"><code class="docutils literal notranslate"><span class="pre">graphiphy()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#rivgraph.deltas.delta_metrics.graphshortestpath"><code class="docutils literal notranslate"><span class="pre">graphshortestpath()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#rivgraph.deltas.delta_metrics.intermediate_vars"><code class="docutils literal notranslate"><span class="pre">intermediate_vars()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#rivgraph.deltas.delta_metrics.nl_entropy_rate"><code class="docutils literal notranslate"><span class="pre">nl_entropy_rate()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#rivgraph.deltas.delta_metrics.normalize_adj_matrix"><code class="docutils literal notranslate"><span class="pre">normalize_adj_matrix()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#rivgraph.deltas.delta_metrics.top_entropy_based_topo"><code class="docutils literal notranslate"><span class="pre">top_entropy_based_topo()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#rivgraph.deltas.delta_metrics.top_link_sharing_index"><code class="docutils literal notranslate"><span class="pre">top_link_sharing_index()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#rivgraph.deltas.delta_metrics.top_number_alternative_paths"><code class="docutils literal notranslate"><span class="pre">top_number_alternative_paths()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#rivgraph.deltas.delta_metrics.top_resistance_distance"><code class="docutils literal notranslate"><span class="pre">top_resistance_distance()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#rivgraph.deltas.delta_metrics.top_s2s_topo_pairwise_dep"><code class="docutils literal notranslate"><span class="pre">top_s2s_topo_pairwise_dep()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#delta-utils">delta_utils</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rivgraph.deltas.delta_utils.clip_by_shoreline"><code class="docutils literal notranslate"><span class="pre">clip_by_shoreline()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#rivgraph.deltas.delta_utils.find_inlet_nodes"><code class="docutils literal notranslate"><span class="pre">find_inlet_nodes()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#rivgraph.deltas.delta_utils.prune_delta"><code class="docutils literal notranslate"><span class="pre">prune_delta()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="rivers.html">rivers</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">RivGraph</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">API Reference</a></li>
      <li class="breadcrumb-item active">deltas</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/apiref/deltas.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="deltas">
<span id="id1"></span><h1>deltas<a class="headerlink" href="#deltas" title="Permalink to this heading"></a></h1>
<span class="target" id="module-rivgraph.deltas.delta_directionality"></span><section id="delta-directionality">
<h2>delta_directionality<a class="headerlink" href="#delta-directionality" title="Permalink to this heading"></a></h2>
<p>Created on Sun Nov 18 19:26:01 2018</p>
<p>&#64;author: Jon</p>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="rivgraph.deltas.delta_directionality.dir_synthetic_DEM">
<span class="sig-prename descclassname"><span class="pre">rivgraph.deltas.delta_directionality.</span></span><span class="sig-name descname"><span class="pre">dir_synthetic_DEM</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">links</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imshape</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rivgraph/deltas/delta_directionality.html#dir_synthetic_DEM"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rivgraph.deltas.delta_directionality.dir_synthetic_DEM" title="Permalink to this definition"></a></dt>
<dd><p>Build a synthetic DEM using inlet/outlet locations.</p>
<p>Builds a synthetic DEM by considering inlets as “hills” and outlets as
“depressions.” This synthetic is then used to compute the “slope”
of each link, which is added to the links dictionary. Additionally,
direction guesses for each link’s flow are computed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>links</strong> (<em>dict</em>) – Network links and associated properties.</p></li>
<li><p><strong>nodes</strong> (<em>dict</em>) – Network nodes and associated properties.</p></li>
<li><p><strong>imshape</strong> (<em>tuple</em>) – Shape of binary mask as (nrows, ncols).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>links</strong> (<em>dict</em>) – Network links and associated properties including a ‘slope’.</p></li>
<li><p><strong>nodes</strong> (<em>dict</em>) – Network nodes and associated properties.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rivgraph.deltas.delta_directionality.fix_delta_cycle">
<span class="sig-prename descclassname"><span class="pre">rivgraph.deltas.delta_directionality.</span></span><span class="sig-name descname"><span class="pre">fix_delta_cycle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">links</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cyc_links</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imshape</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rivgraph/deltas/delta_directionality.html#fix_delta_cycle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rivgraph.deltas.delta_directionality.fix_delta_cycle" title="Permalink to this definition"></a></dt>
<dd><p>Attempt to resolve a single cycle.</p>
<p>Attempts to resolve a single cycle within a delta network. The general
logic is that all link directions of the cycle are un-set except for those
set by highly-reliable algorithms, and a modified direction-setting
recipe is implemented to re-set these algorithms. This was developed
according to the most commonly-encountered cases for real deltas, but could
certainly be improved.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>links</strong> (<em>dict</em>) – Network links and associated properties.</p></li>
<li><p><strong>nodes</strong> (<em>dict</em>) – Network nodes and associated properties.</p></li>
<li><p><strong>cyc_links</strong> (<em>list</em>) – Link ids comprising the cycle to fix.</p></li>
<li><p><strong>imshape</strong> (<em>tuple</em>) – Shape of binary mask as (nrows, ncols).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>links</strong> (<em>dict</em>) – Network links and associated properties with cycle fixed, if possible.</p></li>
<li><p><strong>nodes</strong> (<em>dict</em>) – Network nodes and associated properties with cycle fixed, if possible.</p></li>
<li><p><strong>fixed</strong> (<em>bool</em>) – True if the cycle was resolved, else False.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rivgraph.deltas.delta_directionality.fix_delta_cycles">
<span class="sig-prename descclassname"><span class="pre">rivgraph.deltas.delta_directionality.</span></span><span class="sig-name descname"><span class="pre">fix_delta_cycles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">links</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imshape</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rivgraph/deltas/delta_directionality.html#fix_delta_cycles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rivgraph.deltas.delta_directionality.fix_delta_cycles" title="Permalink to this definition"></a></dt>
<dd><p>Attempt to resolve cycles within the network.</p>
<p>Attempts to resolve all cycles within the delta network. This function
is essentially a wrapper for <a class="reference internal" href="#rivgraph.deltas.delta_directionality.fix_delta_cycle" title="rivgraph.deltas.delta_directionality.fix_delta_cycle"><code class="xref py py-func docutils literal notranslate"><span class="pre">fix_delta_cycle()</span></code></a>, which is where the
heavy lifting is actually done. This function finds cycles, calls
<a class="reference internal" href="#rivgraph.deltas.delta_directionality.fix_delta_cycle" title="rivgraph.deltas.delta_directionality.fix_delta_cycle"><code class="xref py py-func docutils literal notranslate"><span class="pre">fix_delta_cycle()</span></code></a> on each one, then aggregates the results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>links</strong> (<em>dict</em>) – Network links and associated properties.</p></li>
<li><p><strong>nodes</strong> (<em>dict</em>) – Network nodes and associated properties.</p></li>
<li><p><strong>imshape</strong> (<em>tuple</em>) – Shape of binary mask as (nrows, ncols).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>links</strong> (<em>dict</em>) – Network links and associated properties with all possible cycles fixed.</p></li>
<li><p><strong>nodes</strong> (<em>dict</em>) – Network nodes and associated properties with all possible cycles fixed.</p></li>
<li><p><strong>allfixed</strong> (<em>bool</em>) – True if all cycles were resolved, else False.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rivgraph.deltas.delta_directionality.hull_coords">
<span class="sig-prename descclassname"><span class="pre">rivgraph.deltas.delta_directionality.</span></span><span class="sig-name descname"><span class="pre">hull_coords</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xy</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rivgraph/deltas/delta_directionality.html#hull_coords"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rivgraph.deltas.delta_directionality.hull_coords" title="Permalink to this definition"></a></dt>
<dd><p>Compute convex hull of a set of input points.</p>
<p>Computes the convex hull of a set of input points. Arranges the convex
hull coordinates in a clockwise manner and removes the longest edge.
This function is required by <code class="xref py py-func docutils literal notranslate"><span class="pre">dir_synthetic_dem()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>xy</strong> (<em>np.array</em>) – Two element array. First element contains x coordinates, second
contains y coordinates of points to compute a convex hull around.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>hull_coords</strong> – Nx2 array of coordinates defining the convex hull of the input points.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rivgraph.deltas.delta_directionality.set_initial_directionality">
<span class="sig-prename descclassname"><span class="pre">rivgraph.deltas.delta_directionality.</span></span><span class="sig-name descname"><span class="pre">set_initial_directionality</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">links</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imshape</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rivgraph/deltas/delta_directionality.html#set_initial_directionality"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rivgraph.deltas.delta_directionality.set_initial_directionality" title="Permalink to this definition"></a></dt>
<dd><p>Make initial attempt to set flow directions.</p>
<p>Makes an initial attempt to set all flow directions within the network.
This represents the core of the “delta recipe” described in the following
open access paper:
<a class="reference external" href="https://esurf.copernicus.org/articles/8/87/2020/esurf-8-87-2020.pdf">https://esurf.copernicus.org/articles/8/87/2020/esurf-8-87-2020.pdf</a>
However, note that as RivGraph develops, this recipe may no longer match
the one presented in that paper. The recipe chains together a number of
exploitative algorithms to iteratively set flow directions for the most
certain links first.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>links</strong> (<em>dict</em>) – Network links and associated properties.</p></li>
<li><p><strong>nodes</strong> (<em>dict</em>) – Network nodes and associated properties.</p></li>
<li><p><strong>imshape</strong> (<em>tuple</em>) – Shape of binary mask as (nrows, ncols).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>links</strong> (<em>dict</em>) – Network links and associated properties with initial directions set.</p></li>
<li><p><strong>nodes</strong> (<em>dict</em>) – Network nodes and associated properties with initial directions set.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rivgraph.deltas.delta_directionality.set_link_directions">
<span class="sig-prename descclassname"><span class="pre">rivgraph.deltas.delta_directionality.</span></span><span class="sig-name descname"><span class="pre">set_link_directions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">links</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imshape</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manual_set_csv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rivgraph/deltas/delta_directionality.html#set_link_directions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rivgraph.deltas.delta_directionality.set_link_directions" title="Permalink to this definition"></a></dt>
<dd><p>Set each link direction in a network.</p>
<p>This function sets the direction of each link within the network. It
calls a number of helping functions and uses a somewhat-complicated logic
to achieve this. The algorithms and logic is described in this open-access
paper: <a class="reference external" href="https://esurf.copernicus.org/articles/8/87/2020/esurf-8-87-2020.pdf">https://esurf.copernicus.org/articles/8/87/2020/esurf-8-87-2020.pdf</a></p>
<p>Every time this is run, all directionality information is reset and
recomputed. This includes checking for manually set links via the provided
csv.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>links</strong> (<em>dict</em>) – Network links and associated properties.</p></li>
<li><p><strong>nodes</strong> (<em>dict</em>) – Network nodes and associated properties.</p></li>
<li><p><strong>imshape</strong> (<em>tuple</em>) – Shape of binary mask as (nrows, ncols).</p></li>
<li><p><strong>manual_set_csv</strong> (<em>str</em><em>, </em><em>optional</em>) – Path to a user-provided csv file of known link directions. The default
is None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>links</strong> (<em>dict</em>) – Network links and associated properties with all directions set.</p></li>
<li><p><strong>nodes</strong> (<em>dict</em>) – Network nodes and associated properties with all directions set.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-rivgraph.deltas.delta_metrics"></span><section id="delta-metrics">
<h2>delta_metrics<a class="headerlink" href="#delta-metrics" title="Permalink to this heading"></a></h2>
<p>Created on Mon May 21 09:00:01 2018</p>
<p>&#64;author: Jon</p>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="rivgraph.deltas.delta_metrics.add_super_apex">
<span class="sig-prename descclassname"><span class="pre">rivgraph.deltas.delta_metrics.</span></span><span class="sig-name descname"><span class="pre">add_super_apex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">links</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imshape</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rivgraph/deltas/delta_metrics.html#add_super_apex"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rivgraph.deltas.delta_metrics.add_super_apex" title="Permalink to this definition"></a></dt>
<dd><p>If multiple inlets are present, this creates a “super apex” that is
directly upstream of all the inlet nodes. The synthetic links created
have zero length and widths equal to the sum of the widths of the links
connected to their respective inlet node.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rivgraph.deltas.delta_metrics.calc_QR">
<span class="sig-prename descclassname"><span class="pre">rivgraph.deltas.delta_metrics.</span></span><span class="sig-name descname"><span class="pre">calc_QR</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">links</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'wid_adj'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_at</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'graphQR'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rivgraph/deltas/delta_metrics.html#calc_QR"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rivgraph.deltas.delta_metrics.calc_QR" title="Permalink to this definition"></a></dt>
<dd><p>Clunky solution (target for optimization) to get QR at bifurcations.</p>
<p>QR is defined as the larger branch Q / smaller branch Q per
Edmonds &amp; Slingerland 2008 <a class="footnote-reference brackets" href="#id3" id="id2">2</a>. This measure of flux partitioning at a
bifurcation does not scale beyond bifurcations to trifurcations etc.
The graph-based flux partitioning scheme also assumes flow is routed
in a steady-state manner based on the width (or some other attribute)
of the links in the network. Therefore the actual flux value doesn’t
matter, we can calculate QR as larger width / smaller width from the two
branches as that will be the same as if we’d calculated the steady-state
fluxes and taken their ratio.
The function is written flexibly to allow one to assuming flux weighting
by an attribute other than the link width if desired.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>QR values calculated at nodes located at confluences, polyfurcations,
or any other non-bifurcating location will be incorrect!</p>
</div>
<dl class="footnote brackets">
<dt class="label" id="id3"><span class="brackets"><a class="fn-backref" href="#id2">2</a></span></dt>
<dd><p>Edmonds, D. A., and R. L. Slingerland. “Stability of delta
distributary networks and their bifurcations.”
Water Resources Research 44.9 (2008).</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>links</strong> (<em>dict</em>) – RivGraph links dictionary</p></li>
<li><p><strong>nodes</strong> (<em>dict</em>) – RivGraph nodes dictionary</p></li>
<li><p><strong>wt</strong> (<em>str</em><em>, </em><em>optional</em>) – String pointing to the link attribute to use when calculating ratios,
optional, default is ‘wid_adj’ which is the adjusted link widths</p></li>
<li><p><strong>new_at</strong> (<em>str</em><em>, </em><em>optional</em>) – Name of the new attribute to add to the nodes dictionary, optional,
default is ‘graphQR’ to indicate the graph calculated QR value</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>nodes</strong> – RivGraph dictionary with new_at attribute added</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rivgraph.deltas.delta_metrics.compute_delta_metrics">
<span class="sig-prename descclassname"><span class="pre">rivgraph.deltas.delta_metrics.</span></span><span class="sig-name descname"><span class="pre">compute_delta_metrics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">links</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rivgraph/deltas/delta_metrics.html#compute_delta_metrics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rivgraph.deltas.delta_metrics.compute_delta_metrics" title="Permalink to this definition"></a></dt>
<dd><p>Compute delta metrics.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rivgraph.deltas.delta_metrics.compute_steady_state_link_fluxes">
<span class="sig-prename descclassname"><span class="pre">rivgraph.deltas.delta_metrics.</span></span><span class="sig-name descname"><span class="pre">compute_steady_state_link_fluxes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">G</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">links</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'flux_ss'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rivgraph/deltas/delta_metrics.html#compute_steady_state_link_fluxes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rivgraph.deltas.delta_metrics.compute_steady_state_link_fluxes" title="Permalink to this definition"></a></dt>
<dd><p>Compute steady state fluxes through the network graph.</p>
<p>Computes the steady state fluxes through links given a directed, weighted,
NetworkX graph. The network should have only a single inlet (use either
ensure_single_inlet() or add_super_apex() to do this). Additionally,
this method will fail if the network has parallel edges. You should first
run ln_utils artificial_nodes() function to break parallel edges, then
re-compute link widths and lengths. Method after Tejedor et al 2015 <a class="footnote-reference brackets" href="#id5" id="id4">1</a>.</p>
<dl class="footnote brackets">
<dt class="label" id="id5"><span class="brackets"><a class="fn-backref" href="#id4">1</a></span></dt>
<dd><p>Tejedor, Alejandro, et al. “Delta channel networks: 1. A
graph‐theoretic approach for studying connectivity and steady state
transport on deltaic surfaces.”
Water Resources Research 51.6 (2015): 3998-4018.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>G</strong> (<em>networkx.DiGraph</em>) – NetworkX DiGraph object from graphiphy()</p></li>
<li><p><strong>links</strong> (<em>dict</em>) – RivGraph links dictionary</p></li>
<li><p><strong>nodes</strong> (<em>dict</em>) – RivGraph nodes dictionary</p></li>
<li><p><strong>weight_name</strong> (<em>str</em><em>, </em><em>optional</em>) – Name to give the new attribute in the links dictionary, is optional,
if not provided will be ‘flux_ss’ (flux steady-state)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>links</strong> – RivGraph links dictionary with new attribute</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rivgraph.deltas.delta_metrics.delete_super_apex">
<span class="sig-prename descclassname"><span class="pre">rivgraph.deltas.delta_metrics.</span></span><span class="sig-name descname"><span class="pre">delete_super_apex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">links</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rivgraph/deltas/delta_metrics.html#delete_super_apex"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rivgraph.deltas.delta_metrics.delete_super_apex" title="Permalink to this definition"></a></dt>
<dd><p>If you have a super apex, this function deletes it and connecting links.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rivgraph.deltas.delta_metrics.delta_nER">
<span class="sig-prename descclassname"><span class="pre">rivgraph.deltas.delta_metrics.</span></span><span class="sig-name descname"><span class="pre">delta_nER</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">deltavars</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">N</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">500</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rivgraph/deltas/delta_metrics.html#delta_nER"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rivgraph.deltas.delta_metrics.delta_nER" title="Permalink to this definition"></a></dt>
<dd><p>Compute nonlocal entropy rate.</p>
<p>Compute the nonlocal entrop rate (nER) corresponding to the delta
(including flux partition) represented by adjacency matrix A, and compares
its value with the nER resulting from randomizing the flux partition.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>pExc</em> – the probability that the value of nER for a randomization of the fluxes
on the topology dictated by A exceeds the actual value of nER. If the
value of pExc is lower than 0.10, we considered that the actual partition
of fluxes is an extreme value of nER</p></li>
<li><p><em>nER_Delta</em> – the nonlinear entropy rate for the provided adjacency matrix</p></li>
<li><p><em>nER_randA</em> – the nonlinear entropy rates for the N randomized deltas</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rivgraph.deltas.delta_metrics.delta_subN_F">
<span class="sig-prename descclassname"><span class="pre">rivgraph.deltas.delta_metrics.</span></span><span class="sig-name descname"><span class="pre">delta_subN_F</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epsilon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rivgraph/deltas/delta_metrics.html#delta_subN_F"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rivgraph.deltas.delta_metrics.delta_subN_F" title="Permalink to this definition"></a></dt>
<dd><p>Compute steady state flux distribution.</p>
<p>Computes the steady state flux distribution in the delta nodes when the
system is fed with a constant unity influx from the Apex. Also defines the
subnetworks apex-to-outlet.
The SubN is an NxM matrix, where N is number of nodes and M is the number
of outlets. For each mth outlet, its contributing subnetwork is given by
the nonzero entries in SubN. The values in SubN are the degree of
“belongingness” of each node to its subnetwork. If SubN(m,n) = 0, the m’th
node does not belong to the n’th subnetwork; but if SubN(m,n) = 1, the m’th
node belongs <em>only</em> to the n’th subnetwork. The values in SubN may be
interpreted as the percentage of tracers that pass through node m that
eventually make their way to the outlet of subnetwork n.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rivgraph.deltas.delta_metrics.dist_from_apex">
<span class="sig-prename descclassname"><span class="pre">rivgraph.deltas.delta_metrics.</span></span><span class="sig-name descname"><span class="pre">dist_from_apex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nodes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imshape</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rivgraph/deltas/delta_metrics.html#dist_from_apex"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rivgraph.deltas.delta_metrics.dist_from_apex" title="Permalink to this definition"></a></dt>
<dd><p>Calculate normalized distance from apex.</p>
<p>Does this for nodes. Calculates a normalized distances from apex, ignores
pixel resolution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nodes</strong> (<em>dict</em>) – RivGraph dictionary of nodes</p></li>
<li><p><strong>imshape</strong> (<em>tuple</em>) – Tuple of the shape of the domain (e.g., Imask.shape)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>norm_dist</strong> – List of normalized straight line distances between each node and the
inlet in the same order as the nodes come in the input nodes
dictionary.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rivgraph.deltas.delta_metrics.dyn_entropy_based_dyn">
<span class="sig-prename descclassname"><span class="pre">rivgraph.deltas.delta_metrics.</span></span><span class="sig-name descname"><span class="pre">dyn_entropy_based_dyn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">deltavars</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epsilon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rivgraph/deltas/delta_metrics.html#dyn_entropy_based_dyn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rivgraph.deltas.delta_metrics.dyn_entropy_based_dyn" title="Permalink to this definition"></a></dt>
<dd><p>Compute dynamic mutual information and dynamic conditional entropy.</p>
<p>Computes the Dynamic Mutual Information (DMI) and the Dynamic
Conditional Entropy for each subnetwork.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rivgraph.deltas.delta_metrics.dyn_flux_sharing_index">
<span class="sig-prename descclassname"><span class="pre">rivgraph.deltas.delta_metrics.</span></span><span class="sig-name descname"><span class="pre">dyn_flux_sharing_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">deltavars</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epsilon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rivgraph/deltas/delta_metrics.html#dyn_flux_sharing_index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rivgraph.deltas.delta_metrics.dyn_flux_sharing_index" title="Permalink to this definition"></a></dt>
<dd><p>Compute the flux sharing index.</p>
<p>Computes the Flux Sharing Index (LSI) which quantifies the overlapping
(in terms of flux) of each subnetwork with other subnetworks in the
delta.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rivgraph.deltas.delta_metrics.dyn_leakage_index">
<span class="sig-prename descclassname"><span class="pre">rivgraph.deltas.delta_metrics.</span></span><span class="sig-name descname"><span class="pre">dyn_leakage_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">deltavars</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epsilon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rivgraph/deltas/delta_metrics.html#dyn_leakage_index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rivgraph.deltas.delta_metrics.dyn_leakage_index" title="Permalink to this definition"></a></dt>
<dd><p>Compute the leakage index.</p>
<p>Computes the LI which accounts for the fraction of flux in subnetwork i
leaked to other subnetworks.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rivgraph.deltas.delta_metrics.dyn_pairwise_dep">
<span class="sig-prename descclassname"><span class="pre">rivgraph.deltas.delta_metrics.</span></span><span class="sig-name descname"><span class="pre">dyn_pairwise_dep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">deltavars</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epsilon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rivgraph/deltas/delta_metrics.html#dyn_pairwise_dep"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rivgraph.deltas.delta_metrics.dyn_pairwise_dep" title="Permalink to this definition"></a></dt>
<dd><p>Compute subnetwork dynamic pairwise dependence.</p>
<p>Computes the subnetwork to subnetwork dynamic pairwise dependence (DPD)
which quantifies the overlapping for all pairs of subnetworks in terms of
flux.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rivgraph.deltas.delta_metrics.ensure_single_inlet">
<span class="sig-prename descclassname"><span class="pre">rivgraph.deltas.delta_metrics.</span></span><span class="sig-name descname"><span class="pre">ensure_single_inlet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">links</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rivgraph/deltas/delta_metrics.html#ensure_single_inlet"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rivgraph.deltas.delta_metrics.ensure_single_inlet" title="Permalink to this definition"></a></dt>
<dd><p>Ensure only a single apex node exists. This dumbly just prunes all inlet
nodes+links except the widest one. Recommended to use the super_apex()
approach instead if you want to preserve all inlets.</p>
<p>All the delta metrics here require a single apex node, and that that node
be connected to at least two downstream links. This function ensures these
conditions are met; where there are multiple inlets, the widest is chosen.
This function also ensures that the inlet node is attached to at least two
links–this is important for computing un-biased delta metrics.
The links and nodes dicts are copied so they remain unaltered; the altered
copies are returned.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rivgraph.deltas.delta_metrics.find_inlet_outlet_nodes">
<span class="sig-prename descclassname"><span class="pre">rivgraph.deltas.delta_metrics.</span></span><span class="sig-name descname"><span class="pre">find_inlet_outlet_nodes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rivgraph/deltas/delta_metrics.html#find_inlet_outlet_nodes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rivgraph.deltas.delta_metrics.find_inlet_outlet_nodes" title="Permalink to this definition"></a></dt>
<dd><p>Find inlet and outlet nodes.</p>
<p>Given an input adjacency matrix (A), returns the inlet and outlet nodes.
The graph should contain a single apex
(i.e. run ensure_single_inlet first).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rivgraph.deltas.delta_metrics.graphiphy">
<span class="sig-prename descclassname"><span class="pre">rivgraph.deltas.delta_metrics.</span></span><span class="sig-name descname"><span class="pre">graphiphy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">links</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inletweights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rivgraph/deltas/delta_metrics.html#graphiphy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rivgraph.deltas.delta_metrics.graphiphy" title="Permalink to this definition"></a></dt>
<dd><p>Converts RivGraph links and nodes into a NetworkX graph object.</p>
<p>Converts the RivGraph links and nodes dictionaries into a NetworkX graph
object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>links</strong> (<em>dict</em>) – RivGraph links and their attributes</p></li>
<li><p><strong>nodes</strong> (<em>dict</em>) – RivGraph nodes and their attributes</p></li>
<li><p><strong>weight</strong> (<em>str</em><em>, </em><em>optional</em>) – Link attribute to use to weight the NetworkX graph. If not provided or
None, the graph will be unweighted (links of 1 and 0)</p></li>
<li><p><strong>inletweights</strong> (<em>list</em><em>, </em><em>optional</em>) – Optional manual weights for the inlets when using the super-apex
functionality. Overrides the weight set by the inlet link attribute
in favor of values from the provided list. List must be in the same
order and have the same length as nodes[‘inlets’].</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>G</strong> – Returns a NetworkX DiGraph object weighted by the link attribute
specified in the optional parameter <cite>weight</cite></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>networkx.DiGraph</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rivgraph.deltas.delta_metrics.graphshortestpath">
<span class="sig-prename descclassname"><span class="pre">rivgraph.deltas.delta_metrics.</span></span><span class="sig-name descname"><span class="pre">graphshortestpath</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">finish</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rivgraph/deltas/delta_metrics.html#graphshortestpath"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rivgraph.deltas.delta_metrics.graphshortestpath" title="Permalink to this definition"></a></dt>
<dd><p>Find the shortest path.</p>
<p>Uses networkx functions to find the shortest path along a graph defined
by A; path is simply defined as the number of links. Actual length not
considered. Number of links in the shortest path is returned.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rivgraph.deltas.delta_metrics.intermediate_vars">
<span class="sig-prename descclassname"><span class="pre">rivgraph.deltas.delta_metrics.</span></span><span class="sig-name descname"><span class="pre">intermediate_vars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">G</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rivgraph/deltas/delta_metrics.html#intermediate_vars"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rivgraph.deltas.delta_metrics.intermediate_vars" title="Permalink to this definition"></a></dt>
<dd><p>Compute interemediate variables and matrices.</p>
<p>Computes the intermediate variables and matrices required to compute
delta metrics. This function prevents the re-computation of many matrices
required in the metric functions.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rivgraph.deltas.delta_metrics.nl_entropy_rate">
<span class="sig-prename descclassname"><span class="pre">rivgraph.deltas.delta_metrics.</span></span><span class="sig-name descname"><span class="pre">nl_entropy_rate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rivgraph/deltas/delta_metrics.html#nl_entropy_rate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rivgraph.deltas.delta_metrics.nl_entropy_rate" title="Permalink to this definition"></a></dt>
<dd><p>Compute nonlocal entropy rate.</p>
<p>Computes the nonlocal entropy rate (nER) corresponding to the delta
(inlcuding flux partition) represented by matrix A</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rivgraph.deltas.delta_metrics.normalize_adj_matrix">
<span class="sig-prename descclassname"><span class="pre">rivgraph.deltas.delta_metrics.</span></span><span class="sig-name descname"><span class="pre">normalize_adj_matrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">G</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rivgraph/deltas/delta_metrics.html#normalize_adj_matrix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rivgraph.deltas.delta_metrics.normalize_adj_matrix" title="Permalink to this definition"></a></dt>
<dd><p>Normalize adjacency matrix.</p>
<p>Normalizes a graph’s adjacency matrix so the sum of weights of each row
equals one. G is a networkx Graph with weights assigned.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rivgraph.deltas.delta_metrics.top_entropy_based_topo">
<span class="sig-prename descclassname"><span class="pre">rivgraph.deltas.delta_metrics.</span></span><span class="sig-name descname"><span class="pre">top_entropy_based_topo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">deltavars</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epsilon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rivgraph/deltas/delta_metrics.html#top_entropy_based_topo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rivgraph.deltas.delta_metrics.top_entropy_based_topo" title="Permalink to this definition"></a></dt>
<dd><p>Compute topologic mutual information and conditional entropies.</p>
<p>Computes the Topologic Mutual Information (TMI) and the Topologic
Conditional Entropy for each subnetwork.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rivgraph.deltas.delta_metrics.top_link_sharing_index">
<span class="sig-prename descclassname"><span class="pre">rivgraph.deltas.delta_metrics.</span></span><span class="sig-name descname"><span class="pre">top_link_sharing_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">deltavars</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epsilon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rivgraph/deltas/delta_metrics.html#top_link_sharing_index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rivgraph.deltas.delta_metrics.top_link_sharing_index" title="Permalink to this definition"></a></dt>
<dd><p>Compute the link sharing index.</p>
<p>Computes the Link Sharing Index (LSI) which quantifies the overlapping
(in terms of links) of each subnetwork with other subnetworks in the
delta.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rivgraph.deltas.delta_metrics.top_number_alternative_paths">
<span class="sig-prename descclassname"><span class="pre">rivgraph.deltas.delta_metrics.</span></span><span class="sig-name descname"><span class="pre">top_number_alternative_paths</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">deltavars</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epsilon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-15</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rivgraph/deltas/delta_metrics.html#top_number_alternative_paths"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rivgraph.deltas.delta_metrics.top_number_alternative_paths" title="Permalink to this definition"></a></dt>
<dd><p>Compute number of alternative paths.</p>
<p>Computes the number of alternative paths (Nap) in the combinatorics sense
from the Apex to each of the shoreline outlets.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rivgraph.deltas.delta_metrics.top_resistance_distance">
<span class="sig-prename descclassname"><span class="pre">rivgraph.deltas.delta_metrics.</span></span><span class="sig-name descname"><span class="pre">top_resistance_distance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">deltavars</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epsilon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-15</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rivgraph/deltas/delta_metrics.html#top_resistance_distance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rivgraph.deltas.delta_metrics.top_resistance_distance" title="Permalink to this definition"></a></dt>
<dd><p>Compute the topologic resistance distance.</p>
<p>NOTE! TopoDist was not supplied with this function–can use networkX to
compute shortest path but need to know what “shortest” means
This function will not work until TopoDist is resolved.
Computes the resistance distance (RD) from the Apex to each of the
shoreline outlets. The value of RD between two nodes is the effective
resistance between the two nodes when each link in the network is replaced
by a 1 ohm resistor.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rivgraph.deltas.delta_metrics.top_s2s_topo_pairwise_dep">
<span class="sig-prename descclassname"><span class="pre">rivgraph.deltas.delta_metrics.</span></span><span class="sig-name descname"><span class="pre">top_s2s_topo_pairwise_dep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">deltavars</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epsilon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rivgraph/deltas/delta_metrics.html#top_s2s_topo_pairwise_dep"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rivgraph.deltas.delta_metrics.top_s2s_topo_pairwise_dep" title="Permalink to this definition"></a></dt>
<dd><p>Compute subnetwork topologic pairwise dependence.</p>
<p>This  function computes the Subnetwork to Subnetwork Topologic Pairwise
Dependence (TPD) which quantifies the overlapping for all pairs of
subnetworks in terms of links.</p>
</dd></dl>

<span class="target" id="module-rivgraph.deltas.delta_utils"></span><section id="delta-utils">
<h2>delta_utils<a class="headerlink" href="#delta-utils" title="Permalink to this heading"></a></h2>
<p>A collection of functions for pruning a delta channel network.</p>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="rivgraph.deltas.delta_utils.clip_by_shoreline">
<span class="sig-prename descclassname"><span class="pre">rivgraph.deltas.delta_utils.</span></span><span class="sig-name descname"><span class="pre">clip_by_shoreline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">links</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shoreline_shp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gdobj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rivgraph/deltas/delta_utils.html#clip_by_shoreline"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rivgraph.deltas.delta_utils.clip_by_shoreline" title="Permalink to this definition"></a></dt>
<dd><p>Clips links by a provided shoreline shapefile. The largest network is
presumed to be the delta network and is thus retained. The network should
have been de-spurred before running this function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>links</strong> (<em>dict</em>) – stores the network’s links and their properties</p></li>
<li><p><strong>nodes</strong> (<em>dict</em>) – stores the network’s nodes and their properties</p></li>
<li><p><strong>shoreline_shp</strong> (<em>str</em>) – path to the shapefile of shoreline polyline</p></li>
<li><p><strong>gdobj</strong> (<em>osgeo.gdal.Dataset</em>) – gdal object corresponding to the georeferenced input binary channel mask</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>links</strong> (<em>dict</em>) – links dictionary representing network clipped by the shoreline</p></li>
<li><p><strong>nodes</strong> (<em>dict</em>) – nodes dictionary representing network clipped by the shoreline.
‘outlets’ has been added to the dictionary to store a list of outlet
node ids</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rivgraph.deltas.delta_utils.find_inlet_nodes">
<span class="sig-prename descclassname"><span class="pre">rivgraph.deltas.delta_utils.</span></span><span class="sig-name descname"><span class="pre">find_inlet_nodes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nodes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inlets_shp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gdobj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rivgraph/deltas/delta_utils.html#find_inlet_nodes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rivgraph.deltas.delta_utils.find_inlet_nodes" title="Permalink to this definition"></a></dt>
<dd><p>Load inlets from a shapefile.</p>
<p>Loads the user-defined inlet nodes point shapefile and uses it to identify
the inlet nodes within the network.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>links</strong> (<em>dict</em>) – stores the network’s links and their properties</p></li>
<li><p><strong>inlets_shp</strong> (<em>str</em>) – path to the shapefile of inlet locations (point shapefile)</p></li>
<li><p><strong>gdobj</strong> (<em>osgeo.gdal.Dataset</em>) – gdal object corresponding to the georeferenced input binary channel
mask</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>nodes</strong> – nodes dictionary with ‘inlets’ key containing list of inlet node ids</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="rivgraph.deltas.delta_utils.prune_delta">
<span class="sig-prename descclassname"><span class="pre">rivgraph.deltas.delta_utils.</span></span><span class="sig-name descname"><span class="pre">prune_delta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">links</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shoreline_shp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inlets_shp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gdobj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prune_less</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/rivgraph/deltas/delta_utils.html#prune_delta"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#rivgraph.deltas.delta_utils.prune_delta" title="Permalink to this definition"></a></dt>
<dd><p>Prune a delta network.</p>
<p>Clips a delta channel network given an inlet and shoreline shapefile and
removes spurious links.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>links</strong> (<em>dict</em>) – stores the network’s links and their properties</p></li>
<li><p><strong>nodes</strong> (<em>dict</em>) – stores the network’s nodes and their properties</p></li>
<li><p><strong>shoreline_shp</strong> (<em>str</em>) – path to the shoreline shapefile (polyline)</p></li>
<li><p><strong>inlets_shp</strong> (<em>str</em>) – path to the shapefile of inlet locations (point shapefile)</p></li>
<li><p><strong>gdobj</strong> (<em>osgeo.gdal.Dataset</em>) – gdal object corresponding to the georeferenced input binary channel
mask</p></li>
<li><p><strong>prune_less</strong> (<em>bool</em>) – Boolean to prune the network less… the first spur removal can
create problems, especially for very small/simple networks.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>links</strong> (<em>dict</em>) – updated links dictionary</p></li>
<li><p><strong>nodes</strong> (<em>dict</em>) – updated nodes dictionary</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="rivgraph.html" class="btn btn-neutral float-left" title="rivgraph" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="rivers.html" class="btn btn-neutral float-right" title="rivers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, J. Schwenk &amp; J. Hariharan.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>